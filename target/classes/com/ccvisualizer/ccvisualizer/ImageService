package com.ccvisualizer.ccvisualizer;

import org.springframework.stereotype.Service;

@Service
public class ImageService {

    public getImage(String userName) {
        try {
			String filePath = "src/main/java/com/ccvisualizer/ccvisualizer/index.html";
			String outputSvgFilePath = "src/main/java/com/ccvisualizer/ccvisualizer/"+userName+".svg";

			// Parse the HTML file
			File input = new File(filePath);
			Document document = Jsoup.parse(input, "UTF-8");

			// String username from user_name
			

			// Replace the inner text of an element with a new value
			details(userName, document);

			// Save the modified HTML content back to the file
			Element svgElement = convertToSvg(document);

			// Save the SVG content back to the file
			String svgContent = svgElement.outerHtml();
			// String another

			File output = new File(outputSvgFilePath);
			writeToFile(svgContent, output);

			Files.write(Path.of(outputSvgFilePath), svgContent.getBytes(StandardCharsets.UTF_8));

		} catch (IOException e) {
			e.printStackTrace();
		}
    }
}
